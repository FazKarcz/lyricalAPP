<!DOCTYPE html>
<html lang="pl-PL">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../static/css/styleAlbumList.css">
    <script src="https://kit.fontawesome.com/6340fe00a1.js" crossorigin="anonymous"></script>
    <title>Lyrical App</title>
</head>
<body>
    <nav>
        <a href="{% url 'index' %}"><img src="../../static/pics/lyricus_logo.png"></a>
        <ul class="menu">
            <li><a href="{% url 'artist:artist_list' %}">Artyści</a></li>
            <li><a href="{% url 'song:album_list' %}">Albumy</a></li>
            <li><a href="{% url 'song:song_list' %}">Piosenki</a></li>
            <li><a href="{% url 'dashboard' %}">Profil</a></li>
            {% if user.is_authenticated %}
            {% else %}
            <li><a href="{% url 'login' %}">Logowanie</a></li>
            <li><a href="{% url 'register' %}">Rejestracja</a></li>
            {% endif %}
        </ul>
    </nav>
    <main>
        <h1 class="title">Lista Albumów</h1>
        <div class="wrap">
            <form action="" class="searchbar" method="GET">
                <input type="text" class="searchTerm" name="search_query" placeholder="Search albums...">
                <button type="submit" class="searchButton"><i class="fa fa-search" aria-hidden="true"></i></button>
            </form>
        </div>
        <div class="albums">
            <table class="albums_table">
                <tr><th>#</th><th>Album</th><th>Wykonawca</th></tr>
                {% for album in albums %}
                    <tr><td><img src="{{ album.album_cover.url }}" alt="albumPic"></td><td><a href="{% url 'song:album_detail' album.id %}">{{ album.album_name }}</a></td><td><a href="{% url 'artist:artist_detail' artist_id=album.artist_id %}">{{ album.artist }}</a></td></tr>
                {% endfor %}
            </table>
        </div>
        <div class="pagination">
                <span class="step-links">
                {% if page_obj.has_previous %}
                    <form method="get" style="display:inline;">
                        <input type="hidden" name="page" value="1">
                        {% if order_by %}<input type="hidden" name="order_by" value="{{ order_by }}">{% endif %}
                        {% if search_query %}<input type="hidden" name="search_query" value="{{ search_query }}">{% endif %}
                        <button type="submit" class="pag"><i class="fa-solid fa-angles-left" aria-hidden="true"></i></button>
                    </form>

                    <form method="get" style="display:inline;">
                        <input type="hidden" name="page" value="{{ page_obj.previous_page_number }}">
                        {% if order_by %}<input type="hidden" name="order_by" value="{{ order_by }}">{% endif %}
                        {% if search_query %}<input type="hidden" name="search_query" value="{{ search_query }}">{% endif %}
                        <button type="submit" class="pag"><i class="fa-solid fa-angle-left" aria-hidden="true"></i></button>
                    </form>
                {% endif %}

                    <span class="current">
                        Strona {{ page_obj.number }} z {{ page_obj.paginator.num_pages }}
                    </span>

                {% if page_obj.has_next %}
                    <form method="get" style="display:inline;">
                        <input type="hidden" name="page" value="{{ page_obj.next_page_number }}">
                        {% if order_by %}<input type="hidden" name="order_by" value="{{ order_by }}">{% endif %}
                        {% if search_query %}<input type="hidden" name="search_query" value="{{ search_query }}">{% endif %}
                        <button type="submit" class="pag" ><i class="fa-solid fa-angle-right" aria-hidden="true"></i></button>
                    </form>
                    <form method="get" style="display:inline;">
                        <input type="hidden" name="page" value="{{ page_obj.paginator.num_pages }}">
                        {% if order_by %}<input type="hidden" name="order_by" value="{{ order_by }}">{% endif %}
                        {% if search_query %}<input type="hidden" name="search_query" value="{{ search_query }}">{% endif %}
                        <button type="submit" class="pag"><i class="fa-solid fa-angles-right" aria-hidden="true"></i></button>
                    </form>
                {% endif %}
                </span>
        </div>
    </main>
</body>
</html>